kind: ConfigMap  
apiVersion: apps/v1
<<<<<<< HEAD
kind: ConfigMap  
metadata:  
  name: ingress-default-static-files  
  namespace: mfuste
  labels:  
    app: ingress-default   
data:  
  index.html:
    <!doctype html>  
    <html>  
      <head>  
        <meta charset="utf-8">  
        <title>ConfigMap Sergi</title>  
        <link rel="stylesheet" href="main.css">  
      </head>  
      <body>  
        <h1>Hola hola nginx</h1>
      </body>  
    </html>  
  main.css:
    body {
      background-color: lightgray;  
      font-family: Verdana, Arial, Helvetica, sans-serif;  
    }    
---  
apiVersion: apps/v1  
kind: Deployment  
metadata:  
  labels:  
    app: ingress-default   
  name: ingress-default  
  namespace: mfuste
spec:  
  selector:  
    matchLabels:  
      app: ingress-default  
  replicas: 1  
  template:  
    metadata:
      labels:
        app: ingress-default 
      name: ingress-default
    spec:  
      containers:  
        - name: ingress-default
          image: nginx:1.19.6
          imagePullPolicy: Always
          resources:  
            limits:  
              cpu: 100m  
              memory: 10Mi  
            requests:  
              cpu: 100m  
              memory: 10Mi  
          volumeMounts:  
            - readOnly: true  
              mountPath: /usr/share/nginx/html
              name: html-files
      volumes:  
        - name: html-files  
          configMap:  
            name: ingress-default-static-files  
---  
kind: Service  
apiVersion: v1  
metadata:  
  name: ingress-default  
  namespace: mfuste
  labels:  
    app: ingress-default  
spec:  
  selector:  
    app: ingress-default  
  ports:  
  - name: http  
    protocol: TCP  
    port: 80  
    targetPort: 8080  
---  
apiVersion: extensions/v1beta1  
kind: Ingress  
metadata:  
  name: default-ingress  
  namespace: mfuste
  annotations:   
    nginx.ingress.kubernetes.io/rewrite-target: /  
    kubernetes.io/ingress.class: "nginx"    
  labels:  
    app: ingress-default  
spec:  
  rules:  
  - http:  
      paths:  
      - path: /  
        backend:  
          serviceName: ingress-default  
          servicePort: 80
=======
kind: Deployment
metadata:
  name: nginx-deployment
  labels:
    app: nginx
  namespace: mfuste
 
spec:
  replicas: 1
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.19.6
        ports:
          - containerPort: 80
        lifecycle:
          postStart:
            exec:
              command: ["/bin/sh", "-c", "echo '<html><body>Hello with a lifecycle hook<body></html>' > /usr/share/nginx/html/index.html"]
---
apiVersion: v1
kind: Service
metadata:
  name: nginx
  namespace: mfuste
spec:
  selector:
    app: nginx
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
